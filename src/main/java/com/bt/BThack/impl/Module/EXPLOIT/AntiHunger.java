package com.bt.BThack.impl.Module.EXPLOIT;

import com.bt.BThack.api.Module.Module;
import com.bt.BThack.impl.Events.PacketEvent;
import net.minecraft.network.play.client.CPacketEntityAction;
import net.minecraft.network.play.client.CPacketPlayer;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;
import org.lwjgl.input.Keyboard;

public class AntiHunger extends Module {
    public AntiHunger() {
        super("AntiHunger",
                "Reduces loss of hunger.",
                Keyboard.KEY_NONE,
                Category.EXPLOIT,
                false
        );
        addCheckbox("Cancel Move State", this, true);
    }

    @SubscribeEvent
    public void onPacket(PacketEvent.Send e) {

        if (e.getPacket() instanceof CPacketPlayer) {
            CPacketPlayer packet = (CPacketPlayer) e.getPacket();
            if ((mc.player.fallDistance <= 0 || mc.playerController.isHittingBlock) && mc.player.isElytraFlying()) {
            }
            packet.onGround = (mc.player.fallDistance <= 0 || mc.playerController.isHittingBlock) && mc.player.isElytraFlying();
        }

        if (e.getPacket() instanceof CPacketEntityAction) {
            if (getCheckbox(this.name, "Cancel Move State")) {
                CPacketEntityAction packet = (CPacketEntityAction) e.getPacket();
                if (packet.getAction() == CPacketEntityAction.Action.START_SPRINTING ||
                        packet.getAction() == CPacketEntityAction.Action.STOP_SPRINTING
                ) {
                    e.setCanceled(true);
                }
            }
        }
    }
}
